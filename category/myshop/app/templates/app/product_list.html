{% extends 'app/base.html' %}

{% block title %}Danh S√°ch S·∫£n Ph·∫©m{% endblock %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center">
        <h2 class="text-dark fw-bold">üõí Danh S√°ch S·∫£n Ph·∫©m</h2>
        <a href="{% url 'add_product' %}" class="btn btn-success fw-bold">‚ûï Th√™m S·∫£n Ph·∫©m</a>
    </div>

    <!-- Hi·ªÉn th·ªã th√¥ng b√°o khi th√™m / x√≥a s·∫£n ph·∫©m -->
    {% if messages %}
    <div class="alert alert-info mt-3">
        {% for message in messages %}
            {{ message }}
        {% endfor %}
    </div>
    {% endif %}

    <!-- Danh s√°ch s·∫£n ph·∫©m -->
    <div class="table-responsive mt-3">
        <table class="table table-hover table-striped shadow-lg text-center">
            <thead class="table-dark text-white">
                <tr>
                    <th>ID</th>
                    <th>H√¨nh ·∫£nh</th>
                    <th>T√™n s·∫£n ph·∫©m</th>
                    <th class="text-danger">Gi√° m·ªõi</th>
                    <th class="text-muted">Gi√° c≈©</th>
                    <th>Ng√†y t·∫°o</th>
                    <th>Danh m·ª•c</th>
                    <th>H√†nh ƒë·ªông</th>
                </tr>
            </thead>
            <tbody>
                {% for product in products %}
                <tr>
                    <td class="align-middle">{{ product.id }}</td>
                    <td class="align-middle">
                        {% if product.image %}
                        <img src="{{ product.image.url }}" class="product-img">
                        {% else %}
                        <img src="https://via.placeholder.com/50" class="product-img">
                        {% endif %}
                    </td>
                    <td class="align-middle">{{ product.name }}</td>
                    <td class="align-middle text-danger fw-bold">{{ product.price_new|floatformat:0 }} ƒë</td>
                    <td class="align-middle text-muted">{{ product.price_old|floatformat:0 }} ƒë</td>
                    <td class="align-middle">{{ product.created_at|date:"d/m/Y H:i" }}</td>
                    <td class="align-middle">{{ product.category.name }}</td>
                    <td class="align-middle">
                        <a href="{% url 'update_product' product.id %}" class="btn btn-warning btn-sm">‚úèÔ∏è S·ª≠a</a>
                        <a href="{% url 'delete_product' product.id %}" class="btn btn-danger btn-sm">üóëÔ∏è X√≥a</a>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="8" class="text-center text-muted">‚ö†Ô∏è Ch∆∞a c√≥ s·∫£n ph·∫©m n√†o.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}
